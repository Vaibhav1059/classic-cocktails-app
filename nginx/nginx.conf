server {
    listen 80;
    server_name localhost;

    # The root directory is just the base html folder
    root /var/www/html;
    index index.php index.html;

    # This block handles requests for your site at the /cocktails/ URL
    location /cocktails/ {
        # 'alias' maps the URL to the files on the server's disk
        alias /var/www/html/;
        # This makes sure that if you go to /cocktails, it tries to load index.php
        try_files $uri $uri/ @cocktails;

        location ~ \.php$ {
            include fastcgi_params;
            # The fastcgi_param SCRIPT_FILENAME needs to be adjusted for the alias
            fastcgi_param SCRIPT_FILENAME $request_filename;
            # Pass the request to the PHP container
            fastcgi_pass php-app:9000;
        }
    }

    # This is a fallback for pretty URLs within your app
    location @cocktails {
        rewrite /cocktails/(.*)$ /cocktails/index.php?/$1 last;
    }

    # Deny access to .htaccess files
    location ~ /\.ht {
        deny all;
    }
}